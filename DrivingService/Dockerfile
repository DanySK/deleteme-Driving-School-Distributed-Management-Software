FROM gradle:8.1.1-jdk17
WORKDIR /app

COPY ./build/output/DrivingService-SNAPSHOT.jar .

ARG MONGO_URI
ENV MONGO_URI="-Dmongo_uri=${MONGO_URI}"

ARG DRIVING_PORT
ENV DRIVING_PORT="-Ddriving_port=${DRIVING_PORT}"

ARG EXAM_SERVICE_HOST=localhost
ENV EXAM_SERVICE_HOST="-Dexam_host=${EXAM_SERVICE_HOST}"

ARG EXAM_SERVICE_PORT
ENV EXAM_SERVICE_PORT="-Dexam_port=${EXAM_SERVICE_PORT}"

CMD java $MONGO_URI $DRIVING_PORT $EXAM_SERVICE_HOST $EXAM_SERVICE_PORT -jar DrivingService-SNAPSHOT.jar